<!DOCTYPE html>
<html lang="en">
<head>

  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="index, follow" />
  <title>Image Converter â€” Convert Labs</title>
  <meta name="description" content="Free online image converter â€” instantly convert JPG, PNG, WEBP, and GIF formats locally in your browser with Convert Labs. 100% private and secure, no uploads required." />
  <link rel="canonical" href="https://convertlabs.online/tools/image-converter.html" />
  <link rel="icon" href="/assets/convert-labs-icon.png" />
  <link rel="stylesheet" href="/style.css" />

  <script>
    // preload dark theme
    (function(){
      try {
        var t = localStorage.getItem('theme');
        if (t === 'dark') {
          document.documentElement.classList.add('dark');
          if (document.body) document.body.classList.add('dark');
          else document.addEventListener('DOMContentLoaded',()=>document.body.classList.add('dark'));
        }
      } catch(e){}
    })();
  </script>

  <!-- âœ… SEO & OG -->
  <meta property="og:title" content="Image Converter â€” Convert Labs" />
  <meta property="og:description" content="Convert JPG, PNG, WEBP, and GIF images instantly in your browser â€” secure, fast, and private with Convert Labs." />
  <meta property="og:image" content="https://convertlabs.online/assets/image-converter.jpg" />
  <meta property="og:url" content="https://convertlabs.online/tools/image-converter.html" />
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="Convert Labs" />

  <!-- âœ… Breadcrumb & Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
      { "@type": "ListItem", "position": 1, "name": "Home", "item": "https://convertlabs.online/" },
      { "@type": "ListItem", "position": 2, "name": "Tools", "item": "https://convertlabs.online/tools/tools.html" },
      { "@type": "ListItem", "position": 3, "name": "Image Converter" }
    ]
  }
  </script>
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebPage",
    "name": "Image Converter â€” Convert Labs",
    "url": "https://convertlabs.online/tools/image-converter.html",
    "description": "Convert JPG, PNG, WEBP, and GIF images instantly in your browser â€” secure, fast, and private with Convert Labs."
  }
  </script>

  <!-- âœ… AdSense + Analytics -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2490597435056272" crossorigin="anonymous"></script>
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-Z88B03WV7P"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-Z88B03WV7P');
  </script>

  <style>
    .drop-zone {
      border: 2px dashed #2563eb; border-radius: 10px;
      padding: 1rem; text-align: center; margin-top: 1rem;
      color: gray; cursor: pointer; position: relative;
      transition: .15s;
    }
    .drop-zone.dragover { background: #e0e7ff; border-color: #1e40af; }
    #convertMsg { margin-top:8px; font-weight:600; }
    body.dark .drop-zone { border-color: #60a5fa; color: #e6eefc; background: rgba(96,165,250,0.04); }
  </style>

</head>

<body>

  <header class="navbar">
    <div class="nav-container">
      <div class="logo">
        <a href="/" aria-label="Convert Labs Home">
          <img src="/assets/convert-labs-icon.png" class="logo-img" alt="Convert Labs Icon" />
          <span class="brand-text">Convert Labs</span>
        </a>
      </div>
      <nav class="nav-links">
        <ul>
          <li><a href="/">Home</a></li>
          <li><a href="/tools/tools.html" class="active">Tools</a></li>
          <li><a href="/guides.html">Blog</a></li>
          <li><a href="/about.html">About</a></li>
          <li><a href="/contact.html">Contact</a></li>
        </ul>
      </nav>
      <button id="themeToggle" class="theme-toggle" title="Switch Theme">ðŸŒ™</button>
    </div>
  </header>

  <main class="tool-page" style="max-width:900px;margin:auto;padding:2rem 1rem;">
    <h1>Image Converter</h1>
    <p>Convert images locally between <b>JPG</b>, <b>PNG</b>, <b>WEBP</b>, and <b>GIF</b>. Everything runs in your browser â€” no uploads.</p>

    <section style="margin-top:1.5rem;">
      <h2>Interactive Image Converter</h2>
      <div id="dropZone" class="drop-zone">
        ðŸ“‚ Click or drag an image here
        <input type="file" id="imageInput" accept="image/*" style="opacity:0;position:absolute;inset:0;width:100%;height:100%;cursor:pointer;" />
      </div>
      <div style="margin-top:1rem;">
        <select id="formatSelect">
          <option value="image/jpeg">JPG</option>
          <option value="image/png">PNG</option>
          <option value="image/webp">WEBP</option>
          <option value="image/gif">GIF</option>
        </select>
        <button id="convertBtn" class="send-btn" style="margin-left:8px;">Convert Image</button>
      </div>
    </section>

    <section id="previewSection" style="display:none; margin-top:2rem;">
      <h2>Preview & Download</h2>
      <div style="display:flex;flex-wrap:wrap;gap:25px;justify-content:center;">
        <div><p><b>Original</b></p><img id="originalImg" style="max-width:300px;border-radius:10px;box-shadow:0 2px 8px rgba(0,0,0,0.2);" /></div>
        <div><p><b>Converted</b></p><img id="convertedImg" style="max-width:300px;border-radius:10px;box-shadow:0 2px 8px rgba(0,0,0,0.2);" /></div>
      </div>
      <a id="downloadLink" download="converted-image" class="send-btn" style="margin-top:20px;display:inline-block;">Download Converted Image</a>
      <p id="convertMsg"></p>
    </section>
  </main>

  <footer class="footer" style="margin-top:2rem;">
    <p>Â© 2025 Convert Labs. All rights reserved.</p>
  </footer>

  <!-- âœ… FIXED: Ensure GIF encoder loads before main script -->
  <script src="https://cdn.jsdelivr.net/npm/gif-encoder-2/browser.js"></script>

  <script>
  (function(){
    const input=document.getElementById("imageInput");
    const dropZone=document.getElementById("dropZone");
    const formatSelect=document.getElementById("formatSelect");
    const convertBtn=document.getElementById("convertBtn");
    const preview=document.getElementById("previewSection");
    const originalImg=document.getElementById("originalImg");
    const convertedImg=document.getElementById("convertedImg");
    const downloadLink=document.getElementById("downloadLink");
    const msg=document.getElementById("convertMsg");
    const themeToggle=document.getElementById("themeToggle");

    let originalDataURL=null, originalFileSize=0;

    // Fix GIFEncoder detection
    const EncoderClass = window.GIFEncoder || window.GIFEncoder2;
    if (!EncoderClass) {
      console.error("GIFEncoder library not loaded");
    }

    // Theme toggle
    function applyTheme(isDark){
      if(isDark){document.documentElement.classList.add('dark');document.body.classList.add('dark');themeToggle.textContent='â˜€ï¸';}
      else{document.documentElement.classList.remove('dark');document.body.classList.remove('dark');themeToggle.textContent='ðŸŒ™';}
    }
    applyTheme(localStorage.getItem('theme')==='dark');
    themeToggle.onclick=()=>{
      const nowDark=document.documentElement.classList.toggle('dark');
      document.body.classList.toggle('dark',nowDark);
      localStorage.setItem('theme',nowDark?'dark':'light');
      themeToggle.textContent=nowDark?'â˜€ï¸':'ðŸŒ™';
    };

    // Drag/drop
    ['dragenter','dragover'].forEach(evt=>{
      dropZone.addEventListener(evt,e=>{e.preventDefault();dropZone.classList.add('dragover');});
    });
    ['dragleave','drop'].forEach(evt=>{
      dropZone.addEventListener(evt,e=>{e.preventDefault();dropZone.classList.remove('dragover');});
    });
    dropZone.addEventListener('drop', e=>{
      const f=e.dataTransfer.files[0];
      if(f)handleFile(f);
    });
    input.addEventListener('change', e=>{
      const f=e.target.files[0];
      if(f)handleFile(f);
    });

    function handleFile(file){
      if(!file.type.startsWith("image/")){alert("Please upload an image file.");return;}
      originalFileSize=file.size;
      const r=new FileReader();
      r.onload=e=>{
        originalDataURL=e.target.result;
        originalImg.src=originalDataURL;
        preview.style.display='block';
        convertedImg.src='';
        downloadLink.href='';
        msg.textContent=`Original size: ${(file.size/1024).toFixed(1)} KB`;
      };
      r.readAsDataURL(file);
    }

    convertBtn.onclick=async ()=>{
      if(!originalDataURL){alert("Upload an image first.");return;}
      const target=formatSelect.value;
      const img=new Image();
      img.onload=async()=>{
        const canvas=document.createElement('canvas');
        const ctx=canvas.getContext('2d');
        canvas.width=img.width;canvas.height=img.height;
        ctx.drawImage(img,0,0);

        let resultData=null, ext='png';
        try{
          if(target==='image/gif'){
            if(!EncoderClass){alert("GIF encoder not available.");return;}
            const encoder=new EncoderClass(img.width,img.height);
            encoder.start();encoder.setRepeat(0);encoder.setDelay(0);
            const pixels=ctx.getImageData(0,0,img.width,img.height).data;
            encoder.addFrame(pixels,true);
            encoder.finish();
            const binary=encoder.out.getData();
            const blob=new Blob([binary],{type:'image/gif'});
            resultData=URL.createObjectURL(blob);
            ext='gif';
          }else{
            resultData=canvas.toDataURL(target,0.95);
            ext=(target.split('/')[1]||'png').replace('x-icon','png');
          }
        }catch(err){
          alert("Conversion failed: "+err.message);
          return;
        }

        convertedImg.src=resultData;
        downloadLink.href=resultData;
        downloadLink.download=`converted-image.${ext}`;
        msg.textContent='âœ… Conversion complete.';
      };
      img.src=originalDataURL;
    };
  })();
  </script>

</body>
</html>
