<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>7-Day Meal Plan — Convert Labs</title>
  <style>
    :root{
      --brand:#0a4d8c; --brand-2:#134b8b; --muted:#6c6c6c; --bg:#f5faff; --card:#fff; --accent:#2b8bd8; --radius:12px; --text:#111;
    }
    *{box-sizing:border-box} html,body{height:100%;margin:0;font-family:Inter,Arial,sans-serif;background:var(--bg);color:var(--text);}
    .container{max-width:1180px;margin:22px auto;padding:0 16px;}
    .card{background:var(--card);padding:14px;border-radius:12px;box-shadow:0 8px 24px rgba(12,40,80,0.04);margin-bottom:16px}
    .btn{background:var(--brand);color:#fff;padding:8px 12px;border-radius:10px;border:0;cursor:pointer;font-weight:600;}
  </style>
</head>
<body>
  <div class="container">
    <div class="card">
      <h2>7-Day Meal Plan — Precision Macros</h2>
      <div style="margin-top:12px;display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:10px">
        <div>
          <label>TDEE</label>
          <input id="tdeeInput" type="number" placeholder="e.g. 1800" style="padding:8px;border-radius:8px;border:1px solid #e6e6e6;width:100%">
        </div>
        <div>
          <label>Diet</label>
          <select id="dietSelect" style="padding:8px;border-radius:8px;border:1px solid #e6e6e6;width:100%">
            <option value="balanced">Balanced</option>
            <option value="keto">Keto</option>
            <option value="carnivore">Carnivore</option>
            <option value="vegetarian">Vegetarian</option>
          </select>
        </div>
      </div>
      <button id="generateBtn" class="btn" style="margin-top:12px">Generate 7-Day Meal Plan</button>
    </div>

    <div id="mainInner">
      <div class="card">
        <h3>Welcome to Your 7-Day Meal Plan</h3>
        <p>Enter your TDEE and click "Generate 7-Day Meal Plan" to get started.</p>
      </div>
    </div>
  </div>

<script>
// SIMPLE FOOD DATABASE
const FOODS = {
  balanced: [
    { name: "Chicken Breast", kcal: 165, protein: 31, carbs: 0, fat: 3.6 },
    { name: "Brown Rice", kcal: 112, protein: 2.3, carbs: 23, fat: 0.8 },
    { name: "Broccoli", kcal: 35, protein: 2.4, carbs: 7, fat: 0.4 },
    { name: "Eggs", kcal: 155, protein: 13, carbs: 1.1, fat: 11 },
    { name: "Greek Yogurt", kcal: 59, protein: 10, carbs: 3.6, fat: 0.4 }
  ],
  keto: [
    { name: "Bacon", kcal: 541, protein: 37, carbs: 1.4, fat: 42 },
    { name: "Avocado", kcal: 160, protein: 2, carbs: 9, fat: 15 },
    { name: "Eggs", kcal: 155, protein: 13, carbs: 1.1, fat: 11 },
    { name: "Cheese", kcal: 402, protein: 25, carbs: 1.3, fat: 33 }
  ],
  carnivore: [
    { name: "Beef Steak", kcal: 271, protein: 25, carbs: 0, fat: 19 },
    { name: "Bacon", kcal: 541, protein: 37, carbs: 1.4, fat: 42 },
    { name: "Eggs", kcal: 155, protein: 13, carbs: 1.1, fat: 11 }
  ],
  vegetarian: [
    { name: "Tofu", kcal: 76, protein: 8, carbs: 1.9, fat: 4.8 },
    { name: "Lentils", kcal: 116, protein: 9, carbs: 20, fat: 0.4 },
    { name: "Greek Yogurt", kcal: 59, protein: 10, carbs: 3.6, fat: 0.4 },
    { name: "Eggs", kcal: 155, protein: 13, carbs: 1.1, fat: 11 }
  ]
};

// SIMPLE MEAL TEMPLATES
const MEAL_TEMPLATES = {
  balanced: [
    { name: "Breakfast: Eggs & Toast", foods: ["Eggs", "Brown Rice"] },
    { name: "Lunch: Chicken & Rice", foods: ["Chicken Breast", "Brown Rice", "Broccoli"] },
    { name: "Dinner: Chicken Salad", foods: ["Chicken Breast", "Broccoli"] },
    { name: "Snack: Yogurt", foods: ["Greek Yogurt"] }
  ],
  keto: [
    { name: "Breakfast: Bacon & Eggs", foods: ["Bacon", "Eggs"] },
    { name: "Lunch: Avocado Bowl", foods: ["Avocado", "Bacon"] },
    { name: "Dinner: Steak & Eggs", foods: ["Bacon", "Eggs"] },
    { name: "Snack: Cheese", foods: ["Cheese"] }
  ],
  carnivore: [
    { name: "Breakfast: Steak", foods: ["Beef Steak"] },
    { name: "Lunch: Bacon", foods: ["Bacon"] },
    { name: "Dinner: Eggs", foods: ["Eggs"] },
    { name: "Snack: Beef", foods: ["Beef Steak"] }
  ],
  vegetarian: [
    { name: "Breakfast: Tofu Scramble", foods: ["Tofu", "Eggs"] },
    { name: "Lunch: Lentil Bowl", foods: ["Lentils", "Greek Yogurt"] },
    { name: "Dinner: Yogurt Plate", foods: ["Greek Yogurt", "Eggs"] },
    { name: "Snack: Tofu", foods: ["Tofu"] }
  ]
};

function generateMealPlan() {
  const tdee = parseInt(document.getElementById('tdeeInput').value);
  const diet = document.getElementById('dietSelect').value;
  
  if (!tdee) {
    alert("Please enter your TDEE");
    return;
  }

  console.log("Starting meal plan generation...");
  
  const plan = [];
  const dailyCalories = tdee;
  const mealCalories = {
    breakfast: Math.round(dailyCalories * 0.25),
    lunch: Math.round(dailyCalories * 0.35),
    dinner: Math.round(dailyCalories * 0.30),
    snack: Math.round(dailyCalories * 0.10)
  };

  const foods = FOODS[diet];
  const templates = MEAL_TEMPLATES[diet];

  for (let day = 1; day <= 7; day++) {
    console.log(`Generating Day ${day}`);
    
    const dayPlan = {
      day: day,
      meals: {}
    };

    // Generate each meal
    const mealTypes = ['breakfast', 'lunch', 'dinner', 'snack'];
    mealTypes.forEach(mealType => {
      const templateIndex = (day - 1) % templates.length;
      const template = templates[templateIndex];
      const targetCalories = mealCalories[mealType];
      
      console.log(`  ${mealType}: ${template.name}, target: ${targetCalories} kcal`);

      const mealFoods = [];
      let remainingCalories = targetCalories;

      // Add foods from template
      template.foods.forEach(foodName => {
        const food = foods.find(f => f.name === foodName);
        if (food) {
          const caloriesPerFood = Math.round(remainingCalories / template.foods.length);
          const grams = Math.round((caloriesPerFood / food.kcal) * 100);
          
          mealFoods.push({
            name: food.name,
            grams: Math.max(30, grams),
            kcal: Math.round((grams / 100) * food.kcal),
            protein: Math.round((grams / 100) * food.protein),
            carbs: Math.round((grams / 100) * food.carbs),
            fat: Math.round((grams / 100) * food.fat)
          });
          
          console.log(`    - ${food.name}: ${grams}g, ${Math.round((grams / 100) * food.kcal)} kcal`);
        }
      });

      dayPlan.meals[mealType] = {
        name: template.name,
        foods: mealFoods,
        totalKcal: mealFoods.reduce((sum, food) => sum + food.kcal, 0)
      };
    });

    plan.push(dayPlan);
  }

  console.log("✅ Meal plan generated successfully!", plan);
  renderMealPlan(plan);
}

function renderMealPlan(plan) {
  const container = document.getElementById('mainInner');
  container.innerHTML = '';

  plan.forEach(dayPlan => {
    const dayCard = document.createElement('div');
    dayCard.className = 'card';
    dayCard.innerHTML = `<h3>Day ${dayPlan.day}</h3>`;
    
    Object.entries(dayPlan.meals).forEach(([mealType, meal]) => {
      const mealDiv = document.createElement('div');
      mealDiv.style.marginBottom = '16px';
      mealDiv.style.padding = '12px';
      mealDiv.style.border = '1px solid #e6e6e6';
      mealDiv.style.borderRadius = '8px';
      
      let mealHTML = `<strong>${meal.name}</strong> (${meal.totalKcal} kcal)<br>`;
      
      meal.foods.forEach(food => {
        mealHTML += `• ${food.name}: ${food.grams}g - ${food.kcal} kcal (P:${food.protein}g C:${food.carbs}g F:${food.fat}g)<br>`;
      });
      
      mealDiv.innerHTML = mealHTML;
      dayCard.appendChild(mealDiv);
    });
    
    container.appendChild(dayCard);
  });

  // Add success message
  const successMsg = document.createElement('div');
  successMsg.className = 'card';
  successMsg.style.background = '#d1fae5';
  successMsg.style.borderLeft = '4px solid #10b981';
  successMsg.innerHTML = '<strong>✅ Success!</strong> Your 7-day meal plan has been generated.';
  container.insertBefore(successMsg, container.firstChild);
}

// EVENT LISTENER
document.getElementById('generateBtn').addEventListener('click', generateMealPlan);

console.log("Meal plan script loaded successfully!");
</script>
</body>
</html>
